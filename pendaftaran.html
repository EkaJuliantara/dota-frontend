<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>DOTA 2 Competition</title>
  <meta name="description" content="DOTA 2 Competition">
  <meta name="author" content="Panitia IFEST #5 UAJY">
  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="bower_components/flexslider/flexslider.css">
  <link rel="stylesheet" href="vertical-timeline/css/style.css">
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/mobile.css">
  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <script src="scrollreveal-master/dist/scrollreveal.js"></script>
  <script src="scrollreveal-master/dist/scrollreveal.min.js"></script>

  <link rel="icon" type="image/png" href="images/favicon.png">
  <script>
    window.sr = ScrollReveal();
  </script>

  <style type="text/css">
    .error-msg.ng-binding {
      margin-bottom: 15px;
      display: block;
    }
  </style>

 </head>
<body >

<!-- Primary Page Layout
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<section id="header" class="header">
    <div class="container">
        <div class="row">
            <div class="twelve columns">
                <center><div class="lebarA2"><a href="http://ifest-uajy.com" class="site-title">
                    <img src=logo-ifest.png><h1>Informatics Festival #5</h1>
                </a>
            </div></center>
            </div>
        </div>
    </div>
</section>
<section id="site-menu" class="site-menu">
    <div class="container">
        <div class="row">
            <div class="twelve columns">
                <a href="index.html"><img class="logo" src="Logo-Dota.png"></a>
                <div class="hamburger"><span><span class="openbtn" onclick="openNav()">&#9776;</span><span class="closebtn" onclick="closeNav()" >&#735;</span></span> <a href="#"><img class="logo2" src="Logo-Dota.png"></a></div>
                <nav class="menu" id="menu">
                    <ul>
                        <li><a class="menu-link" onclick="closeNav()" href="index.html#opening">Home</a></li>
                        <li><a class="menu-link" onclick="closeNav()" href="index.html#bab1" >Tentang</a></li>
                        <li><a class="menu-link" onclick="closeNav()" href="index.html#bab2" >Hadiah</a></li>
                        <li><a class="menu-link" onclick="closeNav()" href="index.html#bab3" >Registrasi</a></li>
                        <li><a class="menu-link" onclick="closeNav()" href="area-peserta.php" >Area Peserta</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</section>
<section id="isi" class="full">

    <section id="pendaftaran">
        <div class="container">
            <div class="row">
                <div class="six columns">
                    <h3 class="section-title">Pendaftaran</h3>
                </div>
                <div class="six columns">
                    <ol class="breadcrumb">
                        <li>
                            <a href="index.html">
                            Home
                            </a>
                        </li>
                        <li class="active">
                            Pendaftaran
                        </li>
                    </ol>
                </div>
            </div>
        </div>
    </section>
    <section ng-app="registerApp" ng-controller="registerCtrl" id="gab">
        <div class="container">
            <div class="row">
                <div class="six columns">
                    <div class="section register" data-anchor="register-form">
                            <form ng-submit="registerSubmit()">
                                <div class="form-group">
                                    <label for="team_name">Nama Tim </label>
                                    <input ng-model="dataTeam.name" class="form-control" type="text" name="name" required="" />
                                    <span ng-show="errors.name[0]" class="error-msg">{{errors.name[0]}}</span>
                                </div>
                                <div class="form-group">
                                    <label for="email">Email (Email Ketua Tim/Perwakilan)</label>
                                    <input ng-model="dataTeam.email" class="form-control" type="email" name="email" required />
                                    <span ng-show="errors.email[0]" class="error-msg">{{errors.email[0]}}</span>
                                </div>
                                <div class="form-group">
                                    <label for="phone">No. Telp.</label>
                                    <input ng-model="dataTeam.phone" class="form-control" type="text" name="phone" required />
                                    <span ng-show="errors.phone[0]" class="error-msg">{{errors.phone[0]}}</span>
                                </div>
                                <div class="form-group">
                                    <label for="password">Kata Sandi</label>
                                    <input ng-model="dataTeam.password" class="form-control" type="password" name="password" required />
                                    <span ng-show="errors.password[0]" class="error-msg">{{errors.password[0]}}</span>
                                </div>
                                <br/>
                                <p>CAPTAIN :</p>
                                <div class="form-group">
                                    <label for="team_name">Nama : </label>
                                    <input ng-model="dataCaptain.members[0]['full_name']" class="form-control" type="text" name="full_name" required />
                                </div>
                                <div class="form-group">
                                    <label for="steam_id">ID Steam : </label>
                                    <input ng-model="dataCaptain.members[0]['steam_id']" class="form-control" type="text" name="steam_id" required />
                                </div>
                                <div class="register-btn3-change">
                                <button ng-disabled="button == 'MENDAFTAR...'" class="register-btn3" type="submit">{{ button }}</button></div>
                            </form>
                        </div>
                </div>
                <div class="six columns kiri">
                        <section id="juduls2">
                            <div class="container">
                                <div class="row">
                                    <div class="twelve columns">
                                        <center><h2>Syarat dan Ketentuan </h2></center>
                                    </div>
                                    </div>
                                </div>
                            </section>
                        <section id="syarat2">
                            <div class="container">
                                <div class="row">

                                    <div class="twelve columns">

                                                <span class="vr2">&nbsp;</span>
                                        <ol  class="srt">

                                                <li>Khusus untuk pelajar SMA dan Universitas</li>
                        <li>Membentuk sebuah tim yang beranggotakan 5 orang</li>
                        <li>Menunjukan Kartu Pelajar atau Kartu Mahasiswa saat Pendaftaran</li>
                                        </ol>

                                    </div>
                                </div>
                            </div>
                        </section>

                    </div>

            </div>
        </div>
    </section>
</section>
<section id="penutup">
    <br>
    <br>
    <div class="container">
        <div class="row">
            <div class="six columns">
                <center><h3 >CONTACT PERSON</h3></center><br/><ul class="bullet"><li>Frentzen (08156593279 / id line:frentz)</li><li>Dio (0878-3992-2155)</li></ul>
            </div>
            <div class="six columns">
                <center><h3>Follow Us</h3></center><br/>
                <center class="gambar"><a href="http://line.me/ti/p/~@ykb1847q"><img src="./images/ln.png" ></a><a href="https://www.instagram.com/ifest_uajy/"><img src="./images/ins.png" ></a></center>
            </div>
        </div>
    </div>
</section>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
   <script>
     //- hljs.initHighlightingOnLoad();


        sr.reveal( "#penutup .columns", { reset: true, viewOffset: { top: 64 } } );
         sr.reveal( "#pendaftaran .columns", { reset: true, viewOffset: { top: 64 } } );
 sr.reveal( "#juduls .columns", { reset: true, viewOffset: { top: 64 } } );
   sr.reveal( "#syarat .columns", { reset: true, viewOffset: { top: 80 } } );
   sr.reveal("#gab .columns", { reset: true, viewOffset: { top: 64} } );
     function addCommasToNum( num ){
       return num.toString().replace( /\B(?=(\d{3})+(?!\d))/g, "," );
     }

   </script>
  <script src="bower_components/jquery/dist/jquery.min.js"></script>
  <script src="js/style.js"></script>
 <script src="js/menu.js"> </script>

<script type="text/javascript" src="bower_components/angular/angular.min.js"></script>

<script>

function httpInterceptor() {
  return {
    request: function(config) {
      return config;
    },

    requestError: function(config) {
      return config;
    },

    response: function(res) {
      return res;
    },

    responseError: function(res) {
      return res;
    }
  }
}

var registerApp = angular.module("registerApp", [])
  .factory('httpInterceptor', httpInterceptor)
  .config(function($httpProvider) {
    $httpProvider.interceptors.push('httpInterceptor');
  });

registerApp.controller("registerCtrl", function($scope, $http, $window) {

  $scope.dataTeam = {};
  $scope.dataCaptain = {};
  $scope.errors = {};

  $scope.button = "DAFTAR";

  $scope.registerSubmit = function () {

    $scope.errors = {};

    $scope.button = "MENDAFTAR...";

    $http({
      method  : 'POST',
      url     : 'http://api.ifest-uajy.com/v1/dota',
      data    : $.param($scope.dataTeam),
      headers : { 'Content-Type': 'application/x-www-form-urlencoded' }
     })
    .then(function(response) {
      switch (response.status) {
        case 400:
          $scope.errors = response.data.errors;
          $scope.button = "DAFTAR";
        break;
        case 500:
          $scope.errors.ise = "Mohon maaf terdapat kesalahan di bagian server.";
          $scope.button = "DAFTAR";
          break;
        default:

          $scope.dataCaptain.members[0]['media_id'] = 0;
          $scope.dataCaptain.members[0]['role'] = 'Captain';

          $http({
            method  : 'POST',
            url     : 'http://api.ifest-uajy.com/v1/dota/'+response.data.data.id+'/members',
            data    : $.param($scope.dataCaptain),
            headers : { 'Content-Type': 'application/x-www-form-urlencoded' }
           })
          .then(function(response) {
            switch (response.status) {
              case 400:
                $scope.errors = response.data.errors;
                $scope.button = "DAFTAR";
              break;
              case 500:
                $scope.errors.ise = "Mohon maaf terdapat kesalahan di bagian server.";
                $scope.button = "DAFTAR";
                break;
              default:
                $window.location.href = 'pendaftaran-berhasil.html';
                $scope.button = "DAFTAR";
            }
          });

      }
    });
  }
});

</script>

</body>
</html>
